==== Version 1.1.4-006 (tag: map_v1_1_4-006) ====

Fixed CUI-145: Whereis Mobile - Navigate between the tabs- Home page with out Map
- MapDelegate.manipulate* methods can now be safely called for devices that receive hi end maps. 

==== Version 1.1.4-005 (tag: map_v1_1_4-005) ====

Now depends on wl-core-component 1.0.19.

device-config.xml now specifies device families as device ids, such as Apple and Android-OS.

MCS theme file updated for Android-OS devices.   

==== Version 1.1.4-004 (tag: map_v1_1_4-004) ====

Fix for CUI-143 Whereis Mobile - map components with out the images.
- map-component-jsconfig.mscr config corrected to have a "/" after the 
  @env.ems.client.map.icons.img.src.prefix@ token.

==== Version 1.1.4-003 (tag: map_v1_1_4-003) ====

- Now depends on wl-core-component 1.0.18. EMS related mscr files are now sourced from 
  wl-core-component.
- setup.tag now invokes <ems:setup /> and no longer includes EMS, OpenLayers and CommMode mscr
  files directly.
- Entry and exit logging in tag files now occurs at debug level instead of info level.
- mootools dependency largely refactored out of the JavaScript.

- Upgrade notes:
    - For non-showcase webapps, the upgrade should be transparent except that you must
      redeploy your MCS policies.
    - For showcases that use the JAR from this component, note that the EMS.mscr.* properties
      that you placed in showcase/resources/mcs/policies/comp/map/scripts in your project
      should now be placed under showcase/resources/mcs/policies/comp/ems/scripts.
      You must also redeploy your MCS policies.

==== Version 1.1.4-002 (tag: map_v1_1_4-002) ====

Fixed:
- CUI-126 Map Component - High end maps icon incorrect for user selected maps

Now depends on sdpCommon-manager 1.0-068.

Showcase updated with new "Cursor Type" combo box to choose which cursor will
be displayed for the map of a location.

==== Version 1.1.4-001 (tag: map_v1_1_4-001) ====

Fixed CUI-128 Map Component - wl-map-component -1.1.4.jar depends on showcase code.

Refactored Spring contexts so that mapComponentBusinessContext.xml no longer references
any showcase code.

==== Version 1.1.4 (tag: map_v1_1_4) ====

Marks the end of iteration 1.1.4 for the Rockit Common UI project.

FIxed CUI-122 Map Component - hi end POI maps are receiving POI icons with incorrect paths,
although this requires work from the app to be really "fixed". See upgrade notes below. 

Showcase also updated with new POI search "WM bassett-smith valuers near 140 Church St Brighton VIC"
to demonstrate the POI zoom threshold logic.

Hi end map experience updated to match latest design:
- iphone and android should have controls on the map: photo/map button, zoom in/out, fullscreen 
- thub should have controls on the map: photo/map button, zoom in/out, fullscreen, plus pan controls,
  one button on each side of the map. NOTE: Firefox is now treated as the thub experience.  

Upgrade notes:
- When you define the environment property "env.ems.client.map.icons.img.src.prefix",
  make sure that it does not end in "/". Make sure that the clientImgSrcPath property 
  of the au.com.sensis.wireless.manager.mapping.MobilesIcon beans in your context
  include a "/" after the property. eg:
  
    <property name="clientImgSrcPath" 
        value="${env.ems.client.map.icons.img.src.prefix}/images/component/map/markers/standard/icon_emscell_28x28.png" />

==== Version 1.1.3-005 (tag: map_v1_1_3-005) ====

Fixed CUI-121  Map Component - POI map starting zoom level is wrong.

Now depends on sdpCommon-manager 1.0-067 containing the logic fix.

Showcase now provides two POI searches: 
- cars nearby Melbourne Vic
- bars nearby Toorak Vic

The latter search demonstrates the CUI-121 bug.

mobileToEmsZoomConversionMap and emsToMobileZoomConversionMap beans
now map zoom levels one-to-one as agreed by Alex Johnston. 

==== Version 1.1.3-004 (tag: map_v1_1_3-004) ====

LocationManager and LocationManagerImpl now moved to showcase specific packages, 
since they are not part of the component proper.

Showcase now accepts start and end address to be entered for route maps.
Showcase also now demonstrates how the state of the route leg step map zoom
can be retained when clicking between steps but reset when a new route summary
map is obtained. 

==== Version 1.1.3-003 (tag: map_v1_1_3-003) ====

Fixes for CUI-86 Map Component - Route Leg Step Maps.

MapDelegateImpl now implements:
- getInitialRouteLegStepMap
- manipulateRouteLegStepMap 
- getInitialRouteMap (client side generated map support added).

Now depends on sdpCommon-manager 1.0-066.

Showcase updated to display basic route leg step links when a route summary 
map is displayed. All route and leg step maps now work for both hi end
and classic maps. One known issue though: WhereisMobile contains
special code that tries to detect when a pan/zoom of a route summary
map returns to the original map. It is not perfect, though, and this
component does not (yet) cater to this. 

==== Version 1.1.3-002 (tag: map_v1_1_3-002) ====

Fixes for CUI-85 Map Component - Render Routes - Delegate.

MapDelegate updated with new methods:
- getInitialRouteMap
- manipulateRouteMap
- getInitialRouteLegStepMap
- manipulateRouteLegStepMap 

MapDelegateImpl implements getInitialRouteMap (except for path that needs to cater 
to client generated maps) and manipulateRouteMap. JavaScript slightly modified 
to get the hi end maps working. Showcase updated to demonstrate
rendering and manipulating a "journey summary" route map. Works for both Classic maps
and hi end maps. 

Now depends on sdpCommon-manager 1.0-065.

Upgrade notes:
- The Map interface has been refactored so that the zoom details are encapsulated
  by getZoomDetails(). I think this change should be transparent to clients since
  they are not expected to be calling these methods directly.  

==== Version 1.1.3 (tag: map_v1_1_3) ====

Fixes for:
- CUI-93 Map Component - add support for AJAX map/photo toggle, including support for retaining server side state 
- CUI-97 Map Component - Style 

Remaining TODOs (which will become new Jiras):
- Styling of map height is incorrect for low end devices.
- Styling of fullscreen toggle button alignment is incorrect.
- Server side state retention of Photo/Map toggle is not implemented yet.

Upgrade notes:
- When upgrading, you must also upgrade your common-imageserver to map_v1_1_3).

==== Version 1.0.30 (tag: map_v1_0_30) ====

Upgraded to Yoanes' latest MobileEMS.js (1.11) and mobControl_iPhone.js (1.11) from the
devhome project.

Now depends on wl-build-scripts 1.0.9 and wl-core-component 1.0.17 which collectively
fix hotswapping of JavaScript to a showcase that has been deployed using
the showcase*jar-expanded targets.

==== Version 1.0.29 (tag: map_v1_0_29) ====

Fix for "CUI-93 Map Component - add support for AJAX map/photo toggle, including support for retaining server side state".
Not yet complete since we still need Yoanes' JavaScript support.

==== Version 1.0.28 (tag: map_v1_0_28) ====

Fix for "CUI-96: Map Component - always generate icons arg in setup.tag in case 
generateServerSideMap is true in device-config.xml.". MapDelegate methods
now ensure that the returned Map contains non-empty "List<ResolvedIcon>" regardless
of whether the server side map was generated.

==== Version 1.0.27 (tag: map_v1_0_27) ====

Fixes CUI-95 Map Component - render.tag should default map/photo toggle button to "map" to
catch external hybrid map requests. Details are below.

render.tag now will now render a "Map" view link in the event that the currently displayed
MapLayer is anything other than "Map" or "Photo".

==== Version 1.0.26 (tag: map_v1_0_26) ====

Fixes CUI-92 Map Component - JS EMS authorisation must be configurable per app (WPM, WM, YM).
Details are below.

EMS.mscr.* files in src/resources/mcs/policies/comp/map/scripts reduced
to EMS.mscr.default. Url in that file replaced with the following so that 
web apps can substitute their own URL and token:

    <relative>@env.ems.service.js@@env.ems.token@</relative>
    
EMS.mscr.desk, EMS.mscr.sandpit, EMS.mscr.sandpit-dev and EMS.mscr.sandpit-test
added to showcase/resources/mcs/policies/comp/map/scripts so that the showcase
can use its own versions without having to specific a replacement token
for EMS.mscr.default. This in turn avoids figuring out how the map component
showcase would override the standard showcase policy extraction in the shared
build scripts.

Also upgraded ivy.xml to depend on the latest wl-build-scripts 1.0.8 although 
not strictly required.

Upgrade instructions for webapps:
1. Your webapp build.xml must use the sensis:extract-all-component-policies task
   from wl-build-scripts 1.0.8.
2. When calling the task, you must specify a filtersfile:

        <!--
          - Extract the policies from all components found in the core libs dir.
          -->
        <sensis:extract-all-component-policies 
            componentLibDir="${lib.dir}/jar/core" destDir="${build.dir}/work/policies"
            mcsMgrpComponentScriptsBaseUrl="${mcs.mgrp.component.scripts.base.url}"
            mcsMgrpComponentImagesBaseUrl="${mcs.mgrp.component.images.base.url}"
            platform="${project.platform}">
        
            <filtersetelements>
                   <filtersfile file="${cfg.dir}/environment.properties.${project.platform}"/>      
            </filtersetelements>
        </sensis:extract-all-component-policies>
        
   The filters file must define the following properties, where the token must be specific
   to your application and environment (here, we use the WPM dev token as an example):
   
       env.ems.service.js=http://ems.whereis.com/v1/web/js/ems/lib/EMS.js?token=
       env.ems.token=4316381136292159452
       
==== Version 1.0.25 (tag: map_v1_0_25) ====

Based on discussions with Heather and Rob, implemented DefaultScreenDimensionsStrategy 
and configured MapDelegateImpl in mapComponentBusinessContext.xml to use it by default.
Also refactored the bean definition to be a named bean (map.comp.screenDimensionsStrategy) 
so that webapps can (if they wish) substitute their own implementation.

Removed WhitePagesMobileScreenDimensionsStrategy. Removed properties that it 
used to require from map-component.properties.

Added dev and tst config files for JavaScript maps: EMS.mscr.dev and EMS.mscr.tst

==== Version 1.0.24 (tag: map_v1_0_24) ====

MapDelegate interface streamlined based on Heather's feedback during WhereisMobile integration:
- MapDelegate.Action contains new view related members:
    - MAP_VIEW
    - PHOTO_VIEW
    - HYBRID_VIEW
    - isViewAction()
- MapDelegate.manipulateMap and MapDelegate.manipulatePoiMap modified so that the
  mapLayer argument must be the existing MapLayer, not the new value (which is now
  controlled by the MapDelegate.Action value above.
  
Also updated ivy config (in .classpath) to work with latest Eclipse ivy plugins:
- Apache Ivy 2.1.0.final_20090925235825
- Apache IvyDE 2.0.0.final_200907011148-RELEASE
This allows the ivy-settings path to be project relative.

==== Version 1.0.23 (tag: map_v1_0_23) ====

Now depends on wl-core-component 1.0.15 to remove transitive dependency on struts2 
for the default configuration.

==== Version 1.0.22 (tag: map_v1_0_22) ====

MapUrlHolder renamed to Map. MapUrlHolderImpl renamed to MapImpl.

==== Version 1.0.21 (tag: map_v1_0_21) ====

MapDelegate.retrieveInitialMap renamed to getInitialMap.
Now depends on sdpCommon-manager 1.0-063 for some info logging improvements.

==== Version 1.0.20 (tag: map_v1_0_20) ====

Updated with latest MobileEMS.js from Yoanes. Rendering of POIs on
JavaScript maps now works (tested on iphone on sandpit-dev).

==== Version 1.0.19 (tag: map_v1_0_19) ====

Updates to support client side JavaScript POI maps.
- Now depends on sdpCommon-manager 1.0-062 to obtain support for resolving map icons 
  needed for client side JavaScript maps.
- Showcase updates:
    - environment properties now configure env.ems.client.map.icons.img.src.prefix property needed by latest sdpCommon-manager.
    - emsManagerContext.xml updated to set clientImgSrcPath property of MobilesIcon instances.
- MapUrlHolder contains new method "List<ResolvedIcon> getResolvedIcons();". 
  MapDelegateImpl.retrieveInitialMap and getInitialPoiMap updated to set this when
  map rendering is deferred to the client.
- Fixed paths in all *.mimg files based on restructure of component images in the image-server project.
- setup.tag updated to pass ${mapUrlHolder.resolvedIcons} to the JavaScript MobEMS constructor. 

==== Version 1.0.18 (tag: map_v1_0_18) ====

MapDelegate updated with POI support (getInitialPoiMap and manipulatePoiMap).
Showcase updated with a "Render POIs" button that demonstrates a) rendering a POI map and 
b) panning, zooming and changing between Photo/Map layers for POI maps.

==== Version 1.0.17 (tag: map_v1_0_17) ====

Fixed image paths in mapLayer.mimg and photoLayer.mimg.

==== Version 1.0.16 (tag: map_v1_0_16) ====

map.comp.deviceConfigRegistry bean is now configured via the 
comp.device.config.classpath property in map-component.properties.

Now depends on wl-core-component 1.0.14.

==== Version 1.0.15 (tag: map_v1_0_15) ====

Added au.com.sensis.mobile.web.component.map.device.xsd and now
depends on wl-build-scripts 1.0.7 for device-config-xjc target and 
wl-core-component 1.0.13 for related JAXB classes.

Added JAXB classes and xjb files generated by the device-config-xjc target.

Added new MapDeviceConfigRegistry class and injected it into the
MapDelegateImpl. device-config.xml configures whether MapDelegateImpl
will retrieve the server side map (defaults to yes).

==== Version 1.0.14 (tag: map_v1_0_14) ====

Updated to Yoanes' latest JavaScript from the devhome project.

==== Version 1.0.13 (tag: map_v1_0_13) ====

Initial zoom level for the hi end JavaScript maps (set up in setup.tag) now correctly
uses the EMS zoom level instead of the Mobiles zoom level.

==== Version 1.0.12 (tag: map_v1_0_12) ====

MapDelegate methods for obtaining a map of a location, now accept a MobilesIconType.

==== Version 1.0.11 (tag: map_v1_0_11) ====

Added MapLayer support to MapDelegate. Added photo/map layer toggle button to
render tag. Updated map controls to latest mimgs from WhereisMobile (and new
images in the imageserver project: imageserver/common/icons/mapControl).
Also now supports the faded zoom in/out image when the max/min levels are reached.

==== Version 1.0.10 (tag: map_v1_0_10) ====

Heavy refactoring of MapDelegate interface and the classes behind it. Some of this based on WhereisMobile.
Notable changes:
- MapDelegate now accepts a WGS84Point instead of a GeocodedAddress, as per WhereisMobile.
- Replaced MapResult with new MapUrlHolder interface.
- MapDelegateImpl no longer depends on the LocationManager that was inherited from WhitePagesMobile.
- The screen dimensions calculation of the device has been encapsulated behind a ScreenDimensionsStrategy
  interface. This may change in future once the real requirements become apparent.
- Fixed a bug inherited from WhitePagesMobile where panning the map moves the "centre" icon to the new centre. 
  The new implementation has been based on WhereisMobile. This relies on passing the original centre coordinate
  down to the EMSManager, whilst the new centre is encapsulated in the PanZoomDetail.
  
Also upgraded sdpCommon-manager to 1.0-059 in order to obtain new equals and hashCode methods on some
key model classes. 

==== Version 1.0.9 (tag: map_v1_0_9) ====

Upgraded to Yoanes' latest JavaScript from the devhome project.
Updated MCS mscr files to support Android-OS devices.

==== Version 1.0.8 (tag: map_v1_0_8) ====

Upgraded libs:
- sdpCommon-manager from 1.0-050 to 1.0-058.
- wl-core-component from 1.0.6 to 1.0.9.

==== Version 1.0.7 (tag: map_v1_0_7) ====

Fixed showcase bug introduced from previous release when 
publish artifact and showcase names were changed to start with "wl-" prefix.
Some config files were not updated accordingly.

==== Version 1.0.6 (tag: map_v1_0_6) ====

Deliverable from iteration 1.0.6 (and 1.0.5 since I skipped that tag) 
of the rockit Common UI project (http://jira.sensis.com.au/browse/CUI). 
These iterations focused mainly on stabilising the framework.

==== Version 1.0.4 (tag: map_v1_0_4) ====

Deliverable from iteration 1.0.4 of the rockit Common UI project 
(http://jira.sensis.com.au/browse/CUI). This iteration focused mainly 
on adding logging support to the current framework, adding a template
component and fixing up various other, smaller issues.

==== Version 1.0.3 (tag: map_v1_0_3) ====

Deliverable from iteration 1.0.3 of the rockit Common UI project 
(http://jira.sensis.com.au/browse/CUI). This iteration focused mainly 
on testing the current framework by prototyping the networknav and
map components and (locally) integrating them into WPM.

==== Version 1.0.1 (tag: v1_0_1) ====

Deliverable from iteration 1.0.1 of the rockit Common UI project 
(http://jira.sensis.com.au/browse/CUI). This iteration focused mainly 
on the project structure, testbed structure and build scripts. 
All build targets should work.
 
 